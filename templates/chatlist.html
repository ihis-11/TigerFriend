<html>
<head>
    <link rel= "stylesheet" type= "text/css" href= "{{url_for('static',filename='styles/chat.css')}}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <title>TigerFriend | Chat</title>
</head>

<body style="background-color:rgb(243, 237, 237); font-family:Playfair Display">

    <nav class="myNav">                     
        <ul>
            <li style="float:left"><b>TigerFriend</b></li>
            <li><a href="/logout">Logout</a></li>
            <li><a href="/about">About</a></li>
            <li><a href="/">Home</a></li>
        </ul>
    </nav>

    <div class="sidebar">
        <a></a>
        <a href="/surveydetails">Survey</a>
        <a href="/matches">Matches</a>
        <a class="active" href="/chat">Chat</a>
        <a href="/accountdetails">Account</a>
    </div>

    <div class="rightsidebar">
        <img src="https://i.pinimg.com/originals/f9/c2/66/f9c26616722f0b5ae43b87acc3a5ee1d.png" 
        class="image" width="150" height="150"/>
    </div>

   

    <div style="height:180px; padding-top: 50px; text-align: center;">
        <div id="container">
            <aside>
              <header>
                <input type="text" placeholder="search">
              </header>
              <div id="allChats" class="container-fluid" style="width: 100%;"></div>
            </aside>
            <main>
              <header>
                  <h2>Their Username</h2>
              </header>
              <ul id="chat">
                <li class="you">
                    <div class="entete">
                      <span class="status green"></span>
                      <h2>Them</h2>
                      <h3>Time and Date</h3>
                    </div>
                    <div class="triangle"></div>
                    <div class="message">
                      Message
                    </div>
                  </li>
                <li class="me">
                  <div class="entete">
                    <h3>Time and Date</h3>
                    <h2>You</h2>
                    <span class="status blue"></span>
                  </div>
                  <div class="triangle"></div>
                  <div class="message">
                    Message
                  </div>
                </li>
                <li class="me">
                  <div class="entete">
                    <h3>Time and Date</h3>
                    <h2>You</h2>
                    <span class="status blue"></span>
                  </div>
                  <div class="triangle"></div>
                  <div class="message">
                    Message
                  </div>
                </li>
                <li class="you">
                  <div class="entete">
                    <span class="status green"></span>
                    <h2>Them</h2>
                    <h3>Time and Date</h3>
                  </div>
                  <div class="triangle"></div>
                  <div class="message">
                    Message
                  </div>
                </li>
                <li class="me">
                    <div class="entete">
                      <h3>Time and Date</h3>
                      <h2>You</h2>
                      <span class="status blue"></span>
                    </div>
                    <div class="triangle"></div>
                    <div class="message">
                      Message
                    </div>
                  </li>
                  <li class="me">
                    <div class="entete">
                      <h3>Time and Date</h3>
                      <h2>You</h2>
                      <span class="status blue"></span>
                    </div>
                    <div class="triangle"></div>
                    <div class="message">
                      Message
                    </div>
                  </li>
              </ul>
              <footer>
                <textarea placeholder="Type your message"></textarea>
                <a href="#">Send</a>
              </footer>
            </main>
          </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script>
        'use strict';

        function handleResponse(response) {
            $('#allChats').html(response);
        }

        let request = null

        function getChats() {
            let url = '/getChats'

            if (request != null)
                request.abort();

            request = $.ajax({
                type: 'GET',
                url: url,
                success: handleResponse
            });
        }

        function setup() {
            getChats();
            window.setInterval(getChats, 5000);
        }

        $('document').ready(setup);
    </script>

</body>
</html>